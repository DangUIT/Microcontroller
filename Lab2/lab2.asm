ORG 0H
	MOV R1,#9	;GIO
	MOV R2,#59	;PHUT
	MOV R3,#50	;GIAY
MAIN:
	CALL SET_CLOCK
	JMP MAIN
SET_CLOCK:
	CALL HIENTHI
	INC R3
	CJNE R3,#60,SET_CLOCK
	INC R2
	MOV R3,#0
	CJNE R2,#60,SET_CLOCK
	INC R1
	MOV R2,#0
	CJNE R1,#24,SET_CLOCK
	MOV R1,#0
	RET
HIENTHI:
	MOV R4,#50
HIEN_THI:
	MOV A,R1
	MOV B,#10
	DIV AB
	MOV P3,#01H
	MOV P2,A
	SETB P2.4
	CALL DELAY5MS_0
	MOV P3,#02H
	MOV P2,B
	CLR P2.4
	CALL DELAY5MS_0
	MOV A,R2
	MOV B,#10
	DIV AB
	MOV P3,#04H
	MOV P2,A
	SETB P2.4
	CALL DELAY5MS_0
	MOV P3,#08H
	MOV P2,B
	SETB P2.4
	CALL DELAY5MS_0
	DJNZ R4,HIEN_THI
	RET
DELAY5MS:
	MOV TMOD,#01H
	MOV TH0,#HIGH(-5000)
	MOV TL0,#LOW(-5000)
	SETB TR0
	JNB TF0,$
	CLR TR0
	CLR TF0
	RET

DELAY5MS_0:
	MOV R6,#48
DELAY5MS_1:
	MOV R5,#50
	DJNZ R5,$
DELAY5MS_2:
	DJNZ R6,DELAY5MS_1
	RET

END
