.MODEL SMALL
.STACK 100H
.DATA
STR1 DB "A= $"
STR2 DB 10,13, "B= $"
STR3 DB 10,13, "FIBO: $"
X DW ?  ;; X LA N
S1 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
S2 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
S3 DB 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
.CODE  
;;;;;;MAIN;;;;;;;;;;;;;;;;;;
MAIN PROC
 MOV AX, @DATA
 MOV DS, AX
 MOV AH, 9
 LEA DX, STR1
 INT 21H
 CALL INPUT 
 PUSH BX
 MOV AH, 9
 LEA DX, STR2
 INT 21H
 CALL INPUT   
 POP CX
 ADD BX,CX
 MOV X,BX
 MOV AH, 9
 LEA DX, STR3
 INT 21H  
 CALL PRINT_ENTER
 FIBO:           
 MOV AX,X
 SUB AX,1
 MOV X,AX
 CALL S1_TO_S3    ;;S3 = S1
 CALL ADD_FIBO    ;;S1 = S1 + S2
 CALL S3_TO_S2    ;;S2 = S3
 CALL PRINT_FIBO  ;;PRINT S1
 CALL PRINT_ENTER
 MOV CX,X
 ADD CX,1  
 LOOP FIBO 
 JMP END_PROGRAM
MAIN ENDP  
 
;;;;;;;;NHAP SO;;;;;;;;;
INPUT PROC
 MOV BX,0
 LOOP1:
 MOV AH,1
 INT 21H
 CMP AL,13
 JE EXIT
 SUB AL,30H
 MOV AH,0
 PUSH AX
 MOV AX, 10  
 MUL BX
 MOV BX, AX
 POP AX
 ADD BX,AX
 JMP LOOP1
 EXIT:
 RET
INPUT ENDP 
;;;;;;;;S3 = S1;;;;;;;;;;;;
S1_TO_S3 PROC
 MOV CX,21
 S1_1:
 MOV SI,CX
 MOV BL,S1[SI]
 MOV S3[SI],BL
 LOOP S1_1
 RET
S1_TO_S3 ENDP      
;;;;;;;;;S2 = S3;;;;;;;;;;;
S3_TO_S2 PROC
 MOV CX,21
 S2_1:
 MOV SI,CX
 MOV BL,S3[SI]
 MOV S2[SI],BL
 LOOP S2_1
 RET
S3_TO_S2 ENDP     
;;;;;;;;S1+S2;;;;;;;;;;
ADD_FIBO PROC
 MOV CX,21
 MOV AX,0
 ADD_1:
 MOV BL,0
 MOV SI,CX
 ADD BL,AL
 ADD BL,S1[SI]
 ADD BL,S2[SI]
 MOV AH,0
 MOV AL,BL
 MOV BL,10
 DIV BL
 MOV S1[SI],AH
 LOOP ADD_1
 RET
ADD_FIBO ENDP
;;;;;;;;PRINT;;;;;;;;;;;
PRINT_FIBO PROC
 MOV CX,21
 MOV SI,0
 PRINT:
 MOV DL,S1[SI]
 ADD DL,48
 MOV AH,2
 INT 21H
 INC SI
 LOOP PRINT
 RET
PRINT_FIBO ENDP 
;;;;;;;;ENTER;;;;;;;;;;;
PRINT_ENTER PROC
 MOV DL,13
 MOV AH,2
 INT 21H
 MOV DL,10
 MOV AH,2
 INT 21H 
 RET
PRINT_ENTER ENDP    
;;;;;;;;END;;;;;;;;;;;;;
END_PROGRAM:
END